function whichTransitionEvent(){var e,t=document.createElement("fakeelement");for(e in transEndEventNames)if(void 0!==t.style[e])return transEndEventNames[e]}function scrollX(){return window.pageXOffset||docElem.scrollLeft}function scrollY(){return window.pageYOffset||docElem.scrollTop}function getOffset(e){var t=e.getBoundingClientRect();return{top:t.top+scrollY(),left:t.left+scrollX()}}function getViewportW(){var e=docElem.clientWidth,t=window.innerWidth;return e<t?t:e}function getViewportH(){var e=docElem.clientHeight,t=window.innerHeight;return e<t?t:e}function extend(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}$(document).ready(function(){$("#trigger-overlay").on("click",function(e){e.preventDefault(),$(".overlay").toggleClass("open close"),$(".page-container").toggleClass("overlay-open overlay-close"),$("#trigger-overlay").toggleClass("is-active")}),$(".flip-card").flip({autoSize:!1});var e=$(".button--effect-radomir").on("click",function(t){t.preventDefault(),$(this).addClass("button--click"),setTimeout(function(){e.removeClass("button--click")},800)});$(".ripple").on("click",function(e){e.preventDefault();var t=$("<div/>"),i=$(this).offset(),n=e.pageX-i.left,o=e.pageY-i.top;t.addClass("ripple-effect");var s=$(".ripple-effect");s.css("height",$(this).height()),s.css("width",$(this).height()),t.css({top:o-s.height()/2,left:n-s.width()/2,background:$(this).data("ripple-color")}).appendTo($(this)),window.setTimeout(function(){t.remove()},2e3)})}),function(e){var t=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},i=function(t,i,n){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"},this.setting=e.extend(this.setting,i),"string"!=typeof i.axis||"x"!==i.axis.toLowerCase()&&"y"!==i.axis.toLowerCase()||(this.setting.axis=i.axis.toLowerCase()),"boolean"==typeof i.reverse&&(this.setting.reverse=i.reverse),"string"==typeof i.trigger&&(this.setting.trigger=i.trigger.toLowerCase());var o=parseInt(i.speed);isNaN(o)||(this.setting.speed=o),"boolean"==typeof i.forceHeight&&(this.setting.forceHeight=i.forceHeight),"boolean"==typeof i.forceWidth&&(this.setting.forceWidth=i.forceWidth),"boolean"==typeof i.autoSize&&(this.setting.autoSize=i.autoSize),("string"==typeof i.front||i.front instanceof e)&&(this.setting.front=i.front),("string"==typeof i.back||i.back instanceof e)&&(this.setting.back=i.back),this.element=t,this.frontElement=this.getFrontElement(),this.frontElementHeight=this.getFrontElement().height(),this.backElement=this.getBackElement(),this.isFlipped=!1,this.init(n)};e.extend(i.prototype,{flipDone:function(e){var i=this;i.element.one(t(),function(){i.element.trigger("flip:done"),"function"==typeof e&&e.call(i.element)})},flip:function(e){if(!this.isFlipped){this.isFlipped=!0;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}),this.backElement.css({transform:t+"(0deg)","z-index":"1",height:""}),this.flipDone(e)}},unflip:function(e){if(this.isFlipped){this.isFlipped=!1;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+"(0deg)","z-index":"1"}),this.backElement.css({transform:t+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0",height:this.frontElementHeight}),this.flipDone(e)}},getFrontElement:function(){return this.setting.front instanceof e?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof e?this.setting.back:this.element.find(this.setting.back)},init:function(e){var t=this,i=t.frontElement.add(t.backElement),n="rotate"+t.setting.axis,o={perspective:2*t.element["outer"+("rotatex"===n?"Height":"Width")](),position:"relative"},s={transform:n+"("+(t.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},r={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};t.setting.forceHeight?i.outerHeight(t.element.height()):t.setting.autoSize&&(r.height="100%"),t.setting.forceWidth?i.outerWidth(t.element.width()):t.setting.autoSize&&(r.width="100%"),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(o["-webkit-transform-style"]="preserve-3d"),i.css(r).find("*").css({"backface-visibility":"hidden"}),t.element.css(o),t.backElement.css(s),setTimeout(function(){var n=t.setting.speed/1e3||.5;i.css({transition:"all "+n+"s ease-out"}),"function"==typeof e&&e.call(t.element)},20),t.attachEvents()},clickHandler:function(t){t||(t=window.event),this.element.find(e(t.target).closest('button, a, input[type="submit"]')).length||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var t=this;t.element.off("mouseleave.flip"),t.flip(),setTimeout(function(){t.element.on("mouseleave.flip",e.proxy(t.unflip,t)),t.element.is(":hover")||t.unflip()},t.setting.speed+150)},attachEvents:function(){var t=this;"click"===t.setting.trigger?t.element.on(e.fn.tap?"tap.flip":"click.flip",e.proxy(t.clickHandler,t)):"hover"===t.setting.trigger&&(t.element.on("mouseenter.flip",e.proxy(t.hoverHandler,t)),t.element.on("mouseleave.flip",e.proxy(t.unflip,t)))},flipChanged:function(e){this.element.trigger("flip:change"),"function"==typeof e&&e.call(this.element)},changeSettings:function(e,t){var i=this,n=!1;if(void 0!==e.axis&&i.setting.axis!==e.axis.toLowerCase()&&(i.setting.axis=e.axis.toLowerCase(),n=!0),void 0!==e.reverse&&i.setting.reverse!==e.reverse&&(i.setting.reverse=e.reverse,n=!0),n){var o=i.frontElement.add(i.backElement),s=o.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);o.css({transition:"none"});var r="rotate"+i.setting.axis;i.isFlipped?i.frontElement.css({transform:r+(i.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):i.backElement.css({transform:r+(i.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout(function(){o.css(s),i.flipChanged(t)},0)}else i.flipChanged(t)}}),e.fn.flip=function(t,n){return"function"==typeof t&&(n=t),"string"==typeof t||"boolean"==typeof t?this.each(function(){var i=e(this).data("flip-model");"toggle"===t&&(t=!i.isFlipped),t?i.flip(n):i.unflip(n)}):this.each(function(){if(e(this).data("flip-model")){var o=e(this).data("flip-model");!t||void 0===t.axis&&void 0===t.reverse||o.changeSettings(t,n)}else e(this).data("flip-model",new i(e(this),t||{},n))}),this}}(jQuery);var docElem=window.document.documentElement,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},transEndEventName=transEndEventNames[Modernizr.prefixed("transition")],support={pointerevents:Modernizr.pointerevents,csstransitions:Modernizr.csstransitions,csstransforms3d:Modernizr.csstransforms3d};$(document).ready(function(){var e=function(){var t=$(".open-content"),i=$(".close-content"),n=$(".grid-wrap"),o=$(".grid"),s=null,r=null,l=null,a=null;$(window).on("resize",function(){u(),console.log("resize")}),$(window).on("scroll",function(){a?(console.log("scroll"),$(window).scrollTo(gridItem.scrollPosition?gridItem.scrollPosition.x:0,gridItem.scrollPosition?gridItem.scrollPosition.y:0)):(gridItem.scrollPosition={x:$(window).width()||$(document).scrollLeft(),y:$(window).height()||$(document).scrollTop()},g())});var c=function(){if(a)return!1;a=!0,s=$(this),gridItem=s.parents(".overlay-grid-item"),itemPosition=gridItem.position(),gridItemBack=gridItem.find(".back"),gridItemID=gridItem.attr("id"),itemSize={width:gridItemBack.outerWidth(),height:gridItemBack.outerHeight()},content=$(document).find('.content[data-content-for="'+gridItemID+'"]'),contentItems=content.children("div"),loader=content.find("span.loading"),content.length&&(h(),setTimeout(p,25)),a=!1},d=function(){console.log("hide content"),r=$(".placeholder"),contentItems.removeClass("show"),content.removeClass("show"),setTimeout(function(){$("body").removeClass("noscroll")},25),n.removeClass("view-full"),$(".placeholder").css("top",itemPosition.top+"px"),$(".placeholder").css("left",itemPosition.left+"px"),$(".placeholder").css(itemSize);var e=whichTransitionEvent();$(".placeholder").one(e,function(){$(".placeholder").remove(),gridItem.removeClass("active")})},f=function(){setTimeout(function(){loader.removeClass("show"),contentItems.addClass("show")},1e3),content.addClass("show"),loader.addClass("show"),$("body").addClass("noscroll")},h=function(){if(!$(".placeholder").length){var e=document.createElement("div");e.className="placeholder-front",e.innerHTML=gridItemBack.html();var t=document.createElement("div");t.className="placeholder-back",t.innerHTML="&nbsp;";var i=document.createElement("article");i.className="flip-card placeholder",i.append(e),i.append(t),o.append(i),$(".placeholder").css("top",itemPosition.top+"px"),$(".placeholder").css("left",itemPosition.left+"px"),$(".placeholder").css(itemSize)}},p=function(){gridItem.addClass("active"),n.addClass("view-full"),v();var e=whichTransitionEvent();r.one(e,function(){f()})},g=function(){didScroll=!0,setTimeout(function(){m()},60)},m=function(){var e=$(window).scrollTop()+$(window).height()/2;n.css("-webkit-perspective-origin","50% "+e+"px"),n.css("-moz-origin","50% "+e+"px"),n.css("perspective-origin","50% "+e+"px"),didScroll=!1},u=function(){function e(){v(),m()}l&&clearTimeout(l),l=setTimeout(e,50)},v=function(){if(r=$(".placeholder")){var e=o.offset();r.css("left",Number(-1*(e.left-$(window).scrollLeft()))+"px"),r.css("top",Number(-1*(e.top-$(window).scrollTop()))+"px"),r.css("width",$(window).width()+"px"),r.css("height",$(window).height()+"px")}};return t.click(c),i.click(d),{gridOverlay:e}}()});
//# sourceMappingURL=scripts.js.map